<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel TRJ - Gest√£o</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíú</text></svg>">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body>

<header>
    <div class="header-top">
        <h1>Painel TRJ</h1>
        
        <div class="header-controls">
            <div id="btn-admin-secret" class="system-status" onclick="app.toggleAdmin()" title="Clique para liberar acesso Admin">
                <span class="status-dot"></span> Sistema Online
            </div>
            <button class="btn-tutorial-start" onclick="app.startTutorial()">‚ùì Como usar?</button>
        </div>
    </div>

    <nav class="nav-tabs" id="nav-menu">
        <button class="nav-btn active" onclick="app.switchTab('vendas', event)">üí∞ Vendas</button>
        <button class="nav-btn" onclick="app.switchTab('acoes', event)">‚öîÔ∏è A√ß√µes</button>
        <button class="nav-btn" onclick="app.switchTab('divulgacao', event)">üì¢ Divulga√ß√£o</button>
        </nav>
</header>

<div id="vendas" class="section active">
    <div class="row">
        <div class="col">
            <div class="card">
                <h2>Registrar Venda</h2>
                <div class="row" id="area-vendedor-info">
                    <div class="col form-group"><label>Vendedor</label><input type="text" id="venda-vendedor" placeholder="Nome..." autocomplete="off"></div>
                    <div class="col form-group"><label>Fac√ß√£o</label><input type="text" id="venda-faccao" placeholder="Ex: Turkey..." autocomplete="off"></div>
                </div>
                <div class="row">
                    <div class="col form-group"><label>Data</label><input type="date" id="venda-data"></div>
                    <div class="col form-group"><label>Hor√°rio</label><input type="time" id="venda-hora"></div>
                </div>

                <hr class="separator">

                <div class="form-group" id="area-tabela-preco">
                    <label>TABELA DE PRE√áO (GLOBAL):</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="preco-tipo" value="min" onchange="app.updateGlobalPriceType('min')">
                            <div class="radio-label">Parceria (M√≠nimo)</div>
                        </label>
                        <label>
                            <input type="radio" name="preco-tipo" value="max" onchange="app.updateGlobalPriceType('max')" checked>
                            <div class="radio-label">Pista (M√°ximo)</div>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>SELECIONE O ARMAMENTO:</label>
                    <div id="sales-catalog" class="catalog-container"></div>
                </div>

                <div id="price-controls" class="hidden-controls">
                    <div class="row">
                        <div class="col form-group"><label>Valor Unit. (R$)</label><input type="number" id="venda-preco" placeholder="0" readonly></div>
                        <div class="col form-group">
                            <label>Qtd.</label>
                            <div class="qty-selector">
                                <button class="btn-qty" onclick="app.adjustSalesQtd(-1)">-</button>
                                <input type="number" id="venda-qtd" value="1" min="1" onchange="app.validateInput(this)">
                                <button class="btn-qty" onclick="app.adjustSalesQtd(1)">+</button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-outline" id="btn-add-cart" onclick="app.addToCart()">+ ADICIONAR AO CARRINHO</button>
                </div>
                <div id="select-msg" class="text-center text-muted italic mt-15">Selecione uma arma acima...</div>
            </div>
        </div>

        <div class="col">
            <div class="card card-cart" id="area-carrinho">
                <div class="cart-header">
                    <h2>üõí Carrinho</h2>
                    <button class="btn-clear" onclick="app.clearCart()">Limpar</button>
                </div>
                
                <div id="cart-items" class="cart-body">
                    <p class="empty-msg">Carrinho vazio</p>
                </div>

                <div id="cart-summary-area"></div>
                
                <button class="btn btn-primary mt-20" onclick="app.sendSaleWebhook()">
                    üì° FINALIZAR E ENVIAR
                </button>

                <div class="mt-30 border-top pt-20" id="area-producao">
                    <button class="btn btn-secondary btn-glow" onclick="app.calculateCartProduction()">
                        üõ†Ô∏è Calcular Produ√ß√£o do Pedido
                    </button>

                    <div id="cart-production-area" class="production-summary-box hidden mt-20">
                        <div class="prod-box-header">
                            <h3 class="summary-title-styled">Resumo Total</h3>
                            <button class="btn-close-box" onclick="app.closeProduction()">‚úñ</button>
                        </div>
                        
                        <div id="mats-list-display" class="tags-container mb-15"></div>
                        
                        <h4 class="text-muted text-center mb-10 text-sub uppercase">Detalhamento por Item:</h4>
                        <div id="sales-production-details" class="flex-column gap-10"></div>

                        <div class="production-weights-grid mt-15">
                            <div class="weight-pill">
                                üì• Materiais: <span id="total-mat-weight-display" class="text-white">0 kg</span>
                            </div>
                            <div class="weight-pill">
                                üì¶ Armas: <span id="total-prod-weight-display" class="text-white">0 kg</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div id="estatisticas" class="section">
    <div class="card">
        <div class="cart-header">
            <h2>üìä Dashboard Mensal (ADMIN)</h2>
            <button class="btn btn-small" onclick="app.loadDashboard()">üîÑ Atualizar</button>
        </div>
        <p class="text-muted text-center mb-15">Dados sincronizados em tempo real com a nuvem.</p>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Vendas Realizadas</h3>
                <div class="stat-number" id="stat-total-vendas">0</div>
                <div class="stat-desc">Registros este m√™s</div>
            </div>
            <div class="stat-card">
                <h3>Total Movimentado</h3>
                <div class="stat-number" id="stat-total-bruto" style="color: #d8b4fe;">R$ 0</div>
                <div class="stat-desc">Valor Bruto</div>
            </div>
            <div class="stat-card highlight">
                <h3>Lucro L√≠quido (Fac√ß√£o)</h3>
                <div class="stat-number" id="stat-faturamento">R$ 0</div>
                <div class="stat-desc">Ap√≥s custos e %</div>
            </div>
            <div class="stat-card">
                <h3>Itens Vendidos</h3>
                <div class="stat-number" id="stat-total-itens">0</div>
                <div class="stat-desc">Total de unidades</div>
            </div>
        </div>

        <div class="separator"></div>
        <h3>üèÜ Top Itens Vendidos</h3>
        <div id="stats-top-itens" class="top-list">
            <p class="text-muted italic">Carregando dados...</p>
        </div>
    </div>
</div>

<div id="acoes" class="section">
    <div class="card">
        <div class="card-header"><h2>Registro de A√ß√£o</h2></div>
        <div class="row">
            <div class="col form-group">
                <label>Local da A√ß√£o</label>
                <select id="acao-tipo">
                    <option value="" disabled selected>Selecione...</option>
                    <option>Barbearia</option>
                    <option>Loja de Armas</option>
                    <option>Banco Fleeca</option>
                    <option>A√ßougue</option>
                    <option>Banco Central</option>
                    <option>Mergulhador</option>
                    <option>Ni√≥bio</option>
                    <option>Joalheria</option>
                    <option>Helicrash</option>
                    <option>Mesa de Drogas</option>
                    <option>A√ß√£o de Rua (PvP)</option>
                </select>
            </div>
            <div class="col form-group">
                <label>Resultado</label>
                <div class="radio-group">
                    <label><input type="radio" name="resultado" value="Vit√≥ria"><div class="radio-label label-win">Vit√≥ria</div></label>
                    <label><input type="radio" name="resultado" value="Derrota"><div class="radio-label label-loss">Derrota</div></label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col form-group"><label>Data</label><input type="date" id="acao-data"></div>
            <div class="col form-group"><label>Hor√°rio</label><input type="time" id="acao-hora"></div>
        </div>
        <div class="form-group">
            <label>Participantes</label>
            <div class="input-group" id="group-participantes">
                <input type="text" id="novo-participante" placeholder="Nome/ID e Enter..." autocomplete="off" onkeypress="app.handleEnterParticipant(event)">
                <button class="btn btn-small" type="button" onclick="app.addParticipant()">Add</button>
            </div>
            <div id="lista-participantes" class="participants-list"></div>
        </div>
        <button class="btn btn-primary" onclick="app.sendActionWebhook()">üì° Enviar Registro (Discord)</button>
    </div>
</div>

<div id="divulgacao" class="section">
    <div class="card max-w-600 mx-auto">
        <h2>üì¢ Central de An√∫ncios</h2>
        <div class="copy-card" onclick="app.copyAdText(this)">
            üö®üö®TROJAN NA ATIVA üö®üö®<br>
            üî•NOVIDADE üî• PRECISANDO DE ARMAMENTO? ACHOU! PTS ‚Ä¢ SUB ‚Ä¢ FUZIL E MAIS!<br>
            Chama no canal > Trojan
        </div>
    </div>
</div>

<div id="toast-container"></div>

<div id="tutorial-box" class="hidden">
    <div class="tut-header">
        <div id="tut-title">T√≠tulo</div>
        <div id="tut-progress">1/7</div>
    </div>
    <div id="tut-text">Explica√ß√£o aqui...</div>
    <div class="tut-buttons">
        <button class="btn-tut-text" onclick="app.endTutorial()">Pular</button>
        <div class="tut-nav-group">
            <button class="btn-tut-nav" id="btn-tut-prev" onclick="app.prevTutorialStep()" disabled>‚¨Ö Voltar</button>
            <button class="btn-tut-nav btn-tut-next" onclick="app.nextTutorialStep()">Pr√≥ximo ‚û°</button>
        </div>
    </div>
</div>

<img src="gatinho.gif" alt="Mascote Gatinho" class="site-mascot">

<script src="script.js"></script>
</body>
</html>
